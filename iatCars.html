<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>IAT Example</title>
  <script src="jspsych-6.0.5/jspsych.js"></script>
  <script src="jspsych-6.0.5/plugins/jspsych-iat-image.js"></script>
  <script src="jspsych-6.0.5/plugins/jspsych-iat-html.js"></script>
  <script src="jspsych-6.0.5/plugins/jspsych-html-keyboard-response.js"></script>
  <link href="jspsych-6.0.5/css/jspsych.css" rel="stylesheet"></link>
</head>
<body>
</body>
<script>

var welcome_block = {
  type: 'html-keyboard-response',
  stimulus: '<p> Dobrý den! ' + 'Vítejte na stránce experimentu výzkumné laboratoře BERLAB, která mapuje osobní preference dopravních prostředků. ' +
  'Tento implicitní test asociací je zcela anonymní, jeho dokončení by mělo zabrat okolo 10 minut. ' +
  'Na konci se Vám zobrazí výsledek společně s jeho interpretací. </p><p> Pokud chcete pokračovat, stiskněte prosím libovolné tlačítko na klávesnici.</p>',
  post_trial_gap: 1500
};

var category_block = {
  type: 'html-keyboard-response',
  stimulus: '<p>Nyní budete používat tlačítka "E" a "I" na klávesnici k tomu, abyste co nejrychleji roztřídili položky do skupin. ' +
  'Tento test zahrnuje celkem čtyři skupiny, z nichž každá obsahuje buďto slova nebo obrázky, jak ukazuje následující schéma:<br><br>' +
  '<strong>Dobrý</strong>:<br>' + 'Přitažlivý, Láska, Radostný, Smích, Usměvavý, ' +
  'Přítel, Milý, Nadšený<br><br>' + '<strong>Špatný</strong>:<br>' + 'Prohnilý, ' +
  'Nenávist, Ponížit, Strašlivý, Sobecký, Negativní, Otravný, Katastrofa<br><br>' +
  '<strong>Městská hromadná doprava</strong>:<br>' + "<img src='img/pt_reduced (1).jpg'></img>  " +
  "<img src='img/pt_reduced (2).jpg'> ></img>  " + "<img src='img/pt_reduced (3).jpg'></img>  " +
  "<img src='img/pt_reduced (4).jpg'></img>  " + "<img src='img/pt_reduced (5).jpg'></img>  " +
  "<img src='img/pt_reduced (6).jpg'></img>  " + "<img src='img/pt_reduced (7).jpg'></img>  " +
  "<img src='img/pt_reduced (8).jpg'></img>  " + "<img src='img/pt_reduced (9).jpg'></img>  " +
  "<img src='img/pt_reduced (10).jpg'></img><br><br>" + '<strong>Automobily</strong>:<br>' +
  "<img src='img/car_reduced (1).jpg'></img>  " + "<img src='img/car_reduced (2).jpg'></img>  " +
  "<img src='img/car_reduced (3).jpg'></img>  " + "<img src='img/car_reduced (4).jpg'></img>  " +
  "<img src='img/car_reduced (5).jpg'></img>  " + "<img src='img/car_reduced (6).jpg'></img>  " +
  "<img src='img/car_reduced (7).jpg'></img>  " + "<img src='img/car_reduced (8).jpg'></img>  " +
  "<img src='img/car_reduced (9).jpg'></img>  " + "<img src='img/car_reduced (10).jpg'></img><br>" +
  "Úloha má sedm částí. Dávejte pozor! Instrukce se liší u každé části.</p>" +
  "<p>Pro pokračování stiskněte libovolnou klávesu.</p>",
  post_trial_gap: 1500
};

var instructions_block = {
  type: 'html-keyboard-response',
  stimulus: "<div style='position: absolute; top: 18%; left: 20%'><p>Stiskněte E pro:<br><strong>MHD</strong></p></div><br>" +
  "<div style='position: absolute; top: 18%; right: 20%'><p>Stiskněte I pro:<br><strong>Automobil</strong></p></div><br>" +
  "<p><div style='position: relative; top: 42%; margin-left: auto; margin-right: auto'>Položte prst levé ruky na klávesu <strong>E</strong> pro zaznamenání položky, která náleží do kategorie Městská hromadná doprava (MHD). <br> Položte prst pravé ruky na klávesu " +
  "<strong>I</strong> pro zaznamenání položky, která náleží do kategorie Automobily.<br><br>  " +
  "Položky se budou zobrazovat po jedné.<br><br> " +
  "Pokud uděláte chybu, objeví se červené X. Abyste mohl(a) pokračovat, musíte zmáčknout druhou klávesu. " +
  "Odpovídejte co nejrychleji, ale přesně.<br><br> " +
  "Stiskněte libovolnou klávesu, až budete připraven(a) s testem začít. </div></p>",
};


var trial_block = {
  timeline: [
    {
      type: 'iat-image',
      stimulus: jsPsych.timelineVariable('stimulus'),
      stim_key_association: jsPsych.timelineVariable('stim_key_association'),
      html_when_wrong: '<span style="color: red; font-size: 80px">X</span>',
      bottom_instructions: '<p>Pokud uděláte chybu, objeví se červené X. Abyste mohl(a) pokračovat, musíte zmáčknout druhou klávesu.</p>',
      force_correct_key_press: true,
      display_feedback: true,
      trial_duration: 3000, //Only if display_feedback is false
      left_category_key: 'E',
      right_category_key: 'I',
      left_category_label: ['MHD'],
      right_category_label: ['Automobil'],
      response_ends_trial: true,
      data: { iat_type: 'practice' }
    }
  ],
  timeline_variables: [
    {stimulus: "img/pt1.jpg", stim_key_association: "left"},
    {stimulus: "img/pt2.jpg", stim_key_association: "left"},
    {stimulus: "img/pt3.jpg", stim_key_association: "left"},
    {stimulus: "img/pt4.jpg", stim_key_association: "left"},
    {stimulus: "img/pt5.jpg", stim_key_association: "left"},
    {stimulus: "img/pt6.jpg", stim_key_association: "left"},
    {stimulus: "img/pt7.jpg", stim_key_association: "left"},
    {stimulus: "img/pt8.jpg", stim_key_association: "left"},
    {stimulus: "img/pt9.jpg", stim_key_association: "left"},
    {stimulus: "img/pt10.jpg", stim_key_association: "left"},
    {stimulus: "img/car1.jpg", stim_key_association: "right"},
    {stimulus: "img/car2.jpg", stim_key_association: "right"},
    {stimulus: "img/car3.jpg", stim_key_association: "right"},
    {stimulus: "img/car4.jpg", stim_key_association: "right"},
    {stimulus: "img/car5.jpg", stim_key_association: "right"},
    {stimulus: "img/car6.jpg", stim_key_association: "right"},
    {stimulus: "img/car7.jpg", stim_key_association: "right"},
    {stimulus: "img/car8.jpg", stim_key_association: "right"},
    {stimulus: "img/car9.jpg", stim_key_association: "right"},
    {stimulus: "img/car10.jpg", stim_key_association: "right"}	
  ],
  randomize_order: true,
  repetitions: 2
};

var instructions_block2 = {
  type: 'html-keyboard-response',
  stimulus: "<div style='position: absolute; top: 18%; left: 20%'>Stiskněte E pro:<br><strong>Špatný</strong></div><br>" +
  "<div style='position: absolute; top: 18%; right: 20%'>Stiskněte I pro:<br><strong>Dobrý</strong></div><br>" +
  "<p><div style='position: relative; top: 42%; margin-left: auto; margin-right: auto'>Položte prst levé ruky na klávesu <strong>E</strong> pro zaznamenání položky, která náleží do kategorie Špatný. <br> " +
  "Položte prst pravé ruky na klávesu " +
  "<strong>I</strong> pro zaznamenání položky, která náleží do kategorie Dobrý. <br><br>" +
  "Položky se budou zobrazovat po jedné. <br><br> " +
  "Pokud uděláte chybu, objeví se červené X. Abyste mohl(a) pokračovat, musíte zmáčknout druhou klávesu. " +
  "Odpovídejte co nejrychleji, ale přesně.<br><br> " +
  "Stiskněte libovolnou klávesu, až budete připraven(a) pokračovat.</div></p>",
};

var trial_block2 = {
  timeline: [
    {
      type: 'iat-html',
      stimulus: jsPsych.timelineVariable('stimulus'),
      stim_key_association: jsPsych.timelineVariable('stim_key_association'),
      html_when_wrong: '<span style="color: red; font-size: 80px">X</span>',
      bottom_instructions: '<p>Pokud uděláte chybu, objeví se červené X. Abyste mohl(a) pokračovat, musíte zmáčknout druhou klávesu.</p>',
      force_correct_key_press: true,
      display_feedback: true,
      trial_duration: 3000, //Only if display_feedback is false
      left_category_key: 'E',
      right_category_key: 'I',
      left_category_label: ['Špatný'],
      right_category_label: ['Dobrý'],
      response_ends_trial: true,
      data: { iat_type: 'practice' }
    }
  ],
  timeline_variables: [
    {stimulus: "Prohnilý", stim_key_association: "left"},
    {stimulus: "Nenávist", stim_key_association: "left"},
    {stimulus: "Ponížit", stim_key_association: "left"},
    {stimulus: "Strašlivý", stim_key_association: "left"},
    {stimulus: "Sobecký", stim_key_association: "left"},
    {stimulus: "Negativní", stim_key_association: "left"},
    {stimulus: "Otravný", stim_key_association: "left"},
    {stimulus: "Katastrofa", stim_key_association: "left"},
    {stimulus: "Přitažlivý", stim_key_association: "right"},
    {stimulus: "Láska", stim_key_association: "right"},
    {stimulus: "Radostný", stim_key_association: "right"},
    {stimulus: "Smích", stim_key_association: "right"},
    {stimulus: "Usměvavý", stim_key_association: "right"},
    {stimulus: "Přítel", stim_key_association: "right"},
    {stimulus: "Milý", stim_key_association: "right"},
    {stimulus: "Nadšený", stim_key_association: "right"}
  ],
  randomize_order: true,
  repetitions: 2
};

var instructions_block3 = {
  type: 'html-keyboard-response',
  stimulus: "<div style='position: absolute; top: 18%; left: 20%'>Stiskněte E pro:<br> " +
  "<strong>Špatný</strong><br>" + "nebo<br>" + "<strong>MHD</strong></div><br><br>" + "<div style='position: absolute; top: 18%; right: 20%'>" +
  "Stiskněte I pro:<br>" + "<strong>Dobrý</strong><br>" + "nebo<br>" + "<strong>Automobil</strong></div><br><br>" +
  "<p><div style='position: relative; top: 42%; margin-left: auto; margin-right: auto'>Stiskněte klávesu <strong>E</strong> pro kategorii " +
  "Špatný a Městská hromadná doprava. <br>" + "Stiskněte klávesu <strong>I</strong> pro kategorii Dobrý a Automobily. <br><br>" +
  "Každá položka patří pouze do jedné skupiny.<br><br> " +
  "Pokud uděláte chybu, objeví se červené X. Abyste mohl(a) pokračovat, musíte zmáčknout druhou klávesu. " +
  "Odpovídejte co nejrychleji, ale přesně.<br><br> " +
  "Stiskněte libovolnou klávesu, až budete připraven(a) pokračovat.</div></p>",
};

var trial_block3 = {
  timeline: [
    {
      type: jsPsych.timelineVariable('type'),
      stimulus: jsPsych.timelineVariable('stimulus'),
      stim_key_association: jsPsych.timelineVariable('stim_key_association'),
      html_when_wrong: '<span style="color: red; font-size: 80px">X</span>',
      bottom_instructions: '<p>Pokud uděláte chybu, objeví se červené X. Abyste mohl(a) pokračovat, musíte zmáčknout druhou klávesu.</p>',
      force_correct_key_press: true,
      display_feedback: true,
      trial_duration: 3000, //Only if display_feedback is false
      left_category_key: 'E',
      right_category_key: 'I',
      left_category_label: ['Špatný', 'MHD'],
      right_category_label: ['Dobrý', 'Automobil'],
      response_ends_trial: true,
      data: { iat_type: 'practice' }
    }
  ],
  timeline_variables: [
    {type: 'iat-image', stimulus: "img/pt1.jpg", stim_key_association: "left"},
    {type: 'iat-image', stimulus: "img/pt2.jpg", stim_key_association: "left"},
    {type: 'iat-image', stimulus: "img/pt3.jpg", stim_key_association: "left"},
    {type: 'iat-image', stimulus: "img/pt4.jpg", stim_key_association: "left"},
    {type: 'iat-image', stimulus: "img/pt5.jpg", stim_key_association: "left"},
    {type: 'iat-image', stimulus: "img/pt6.jpg", stim_key_association: "left"},
    {type: 'iat-image', stimulus: "img/pt7.jpg", stim_key_association: "left"},
    {type: 'iat-image', stimulus: "img/pt8.jpg", stim_key_association: "left"},
    {type: 'iat-image', stimulus: "img/pt9.jpg", stim_key_association: "left"},
    {type: 'iat-image', stimulus: "img/pt10.jpg", stim_key_association: "left"},
    {type: 'iat-image', stimulus: "img/car1.jpg", stim_key_association: "right"},
    {type: 'iat-image', stimulus: "img/car2.jpg", stim_key_association: "right"},
    {type: 'iat-image', stimulus: "img/car3.jpg", stim_key_association: "right"},
    {type: 'iat-image', stimulus: "img/car4.jpg", stim_key_association: "right"},
    {type: 'iat-image', stimulus: "img/car5.jpg", stim_key_association: "right"},
    {type: 'iat-image', stimulus: "img/car6.jpg", stim_key_association: "right"},
    {type: 'iat-image', stimulus: "img/car7.jpg", stim_key_association: "right"},
    {type: 'iat-image', stimulus: "img/car8.jpg", stim_key_association: "right"},
    {type: 'iat-image', stimulus: "img/car9.jpg", stim_key_association: "right"},
    {type: 'iat-image', stimulus: "img/car10.jpg", stim_key_association: "right"},
	{type: 'iat-html', stimulus: "Prohnilý", stim_key_association: "left"},
    {type: 'iat-html', stimulus: "Nenávist", stim_key_association: "left"},
    {type: 'iat-html', stimulus: "Ponížit", stim_key_association: "left"},
    {type: 'iat-html', stimulus: "Strašlivý", stim_key_association: "left"},
    {type: 'iat-html', stimulus: "Sobecký", stim_key_association: "left"},
    {type: 'iat-html', stimulus: "Negativní", stim_key_association: "left"},
    {type: 'iat-html', stimulus: "Otravný", stim_key_association: "left"},
    {type: 'iat-html', stimulus: "Katastrofa", stim_key_association: "left"},
    {type: 'iat-html', stimulus: "Přitažlivý", stim_key_association: "right"},
    {type: 'iat-html', stimulus: "Láska", stim_key_association: "right"},
    {type: 'iat-html', stimulus: "Radostný", stim_key_association: "right"},
    {type: 'iat-html', stimulus: "Smích", stim_key_association: "right"},
    {type: 'iat-html', stimulus: "Usměvavý", stim_key_association: "right"},
    {type: 'iat-html', stimulus: "Přítel", stim_key_association: "right"},
    {type: 'iat-html', stimulus: "Milý", stim_key_association: "right"},
    {type: 'iat-html', stimulus: "Nadšený", stim_key_association: "right"}
  ],
  randomize_order: true,
  repetitions: 1
};

var instructions_block4 = {
  type: 'html-keyboard-response',
  stimulus: "<div style='position: absolute; top: 18%; left: 20%'>Stiskněte E pro:<br> " +
  "<strong>Špatný</strong><br>" + "nebo<br>" + "<strong>MHD</strong></div><br><br>" + "<div style='position: absolute; top: 18%; right: 20%'>" +
  "Stiskněte I pro::<br>" + "<strong>Dobrý</strong><br>" + "nebo<br>" + "<strong>Automobil</strong></div><br><br>" +
  "<p><div style='position: relative; top: 42%; margin-left: auto; margin-right: auto'>Tato část je stejná jako část předchozí.<br><br>" + "Stiskněte klávesu <strong>E</strong> pro kategorii Špatný nebo MHD. <br>"
  + "Stiskněte klávesu <strong>I</strong> pro kategorii Dobrý nebo Automobil. <br><br>" +
  "Každá položka patří pouze do jedné skupiny.<br><br>" +
  "Pokud uděláte chybu, objeví se červené X. Abyste mohl(a) pokračovat, musíte zmáčknout druhou klávesu. " +
  "Odpovídejte co nejrychleji, ale přesně.<br><br> " +
  "Stiskněte libovolnou klávesu, až budete připraven(a) pokračovat.</div></p>",
};

var trial_block4 = {
  timeline: [
      {
        type: jsPsych.timelineVariable('type'),
        is_html: jsPsych.timelineVariable('is_html'),
        stimulus: jsPsych.timelineVariable('stimulus'),
        stim_key_association: jsPsych.timelineVariable('stim_key_association'),
        html_when_wrong: '<span style="color: red; font-size: 80px">X</span>',
        bottom_instructions: '<p>Pokud uděláte chybu, objeví se červené X. Abyste mohl(a) pokračovat, musíte zmáčknout druhou klávesu.</p>',
        force_correct_key_press: true,
        display_feedback: true,
        trial_duration: 3000, //Only if display_feedback is false
        left_category_key: 'E',
        right_category_key: 'I',
        left_category_label: ['Špatný', 'MHD'],
        right_category_label: ['Dobrý', 'Automobil'],
        response_ends_trial: true,
        data: { iat_type: 'bad-old' }
      }
    ],
    timeline_variables: [
      {type: 'iat-image', stimulus: "img/pt1.jpg", stim_key_association: "left"},
      {type: 'iat-image', stimulus: "img/pt2.jpg", stim_key_association: "left"},
      {type: 'iat-image', stimulus: "img/pt3.jpg", stim_key_association: "left"},
      {type: 'iat-image', stimulus: "img/pt4.jpg", stim_key_association: "left"},
      {type: 'iat-image', stimulus: "img/pt5.jpg", stim_key_association: "left"},
      {type: 'iat-image', stimulus: "img/pt6.jpg", stim_key_association: "left"},
      {type: 'iat-image', stimulus: "img/pt7.jpg", stim_key_association: "left"},
      {type: 'iat-image', stimulus: "img/pt8.jpg", stim_key_association: "left"},
      {type: 'iat-image', stimulus: "img/pt9.jpg", stim_key_association: "left"},
      {type: 'iat-image', stimulus: "img/pt10.jpg", stim_key_association: "left"},
      {type: 'iat-image', stimulus: "img/car1.jpg", stim_key_association: "right"},
      {type: 'iat-image', stimulus: "img/car2.jpg", stim_key_association: "right"},
      {type: 'iat-image', stimulus: "img/car3.jpg", stim_key_association: "right"},
      {type: 'iat-image', stimulus: "img/car4.jpg", stim_key_association: "right"},
      {type: 'iat-image', stimulus: "img/car5.jpg", stim_key_association: "right"},
      {type: 'iat-image', stimulus: "img/car6.jpg", stim_key_association: "right"},
      {type: 'iat-image', stimulus: "img/car7.jpg", stim_key_association: "right"},
      {type: 'iat-image', stimulus: "img/car8.jpg", stim_key_association: "right"},
      {type: 'iat-image', stimulus: "img/car9.jpg", stim_key_association: "right"},
      {type: 'iat-image', stimulus: "img/car10.jpg", stim_key_association: "right"},
	  {type: 'iat-html', stimulus: "Prohnilý", stim_key_association: "left"},
      {type: 'iat-html', stimulus: "Nenávist", stim_key_association: "left"},
      {type: 'iat-html', stimulus: "Ponížit", stim_key_association: "left"},
      {type: 'iat-html', stimulus: "Strašlivý", stim_key_association: "left"},
      {type: 'iat-html', stimulus: "Sobecký", stim_key_association: "left"},
      {type: 'iat-html', stimulus: "Negativní", stim_key_association: "left"},
      {type: 'iat-html', stimulus: "Otravný", stim_key_association: "left"},
      {type: 'iat-html', stimulus: "Katastrofa", stim_key_association: "left"},
      {type: 'iat-html', stimulus: "Přitažlivý", stim_key_association: "right"},
      {type: 'iat-html', stimulus: "Láska", stim_key_association: "right"},
      {type: 'iat-html', stimulus: "Radostný", stim_key_association: "right"},
      {type: 'iat-html', stimulus: "Smích", stim_key_association: "right"},
      {type: 'iat-html', stimulus: "Usměvavý", stim_key_association: "right"},
      {type: 'iat-html', stimulus: "Přítel", stim_key_association: "right"},
      {type: 'iat-html', stimulus: "Milý", stim_key_association: "right"},
      {type: 'iat-html', stimulus: "Nadšený", stim_key_association: "right"}
    ],
    randomize_order: true,
    repetitions: 2
  };

  var instructions_block5 = {
    type: 'html-keyboard-response',
    stimulus: "<div style='position: absolute; top: 18%; left: 20%'>Stiskněte E pro:<br>" + "<strong>Automobil</strong></div><br><br>" +
    "<div style='position: absolute; top: 18%; right: 20%'>Stiskněte I pro:<br>" + "<strong>MHD</strong></div><br><br>" +
    "<p><div style='position: relative; top: 42%; margin-left: auto; margin-right: auto'><strong>Pozor, označení skupin má nyní prohozenou pozici!</strong><br><br>" +
    "Položte prst levé ruky na klávesu <strong>E</strong> pro zaznamenání položky, která náleží do kategorie Automobily. <br>" + "Položte prst pravé ruky na klávesu <strong>I</strong> pro zaznamenání položky, která náleží do kategorie MHD.<br><br>" +
    "Pokud uděláte chybu, objeví se červené X. Abyste mohl(a) pokračovat, musíte zmáčknout druhou klávesu. " +
    "Odpovídejte co nejrychleji, ale přesně.<br><br> " +
    "Stiskněte libovolnou klávesu, až budete připraven(a) pokračovat.</div></p>"
  };

  var trial_block5 = {
    timeline: [
      {
        type: 'iat-image',
        is_html: false,
        stimulus: jsPsych.timelineVariable('stimulus'),
        stim_key_association: jsPsych.timelineVariable('stim_key_association'),
        html_when_wrong: '<span style="color: red; font-size: 80px">X</span>',
        bottom_instructions: '<p>Pokud uděláte chybu, objeví se červené X. Abyste mohl(a) pokračovat, musíte zmáčknout druhou klávesu.</p>',
        force_correct_key_press: true,
        display_feedback: true,
        trial_duration: 3000, //Only if display_feedback is false
        left_category_key: 'E',
        right_category_key: 'I',
        left_category_label: ['Automobil'],
        right_category_label: ['MHD'],
        response_ends_trial: true,
        data: { iat_type: 'practice' }
      }
    ],
    timeline_variables: [
    {type: 'iat-image', stimulus: "img/pt1.jpg", stim_key_association: "right"},
    {type: 'iat-image', stimulus: "img/pt2.jpg", stim_key_association: "right"},
    {type: 'iat-image', stimulus: "img/pt3.jpg", stim_key_association: "right"},
    {type: 'iat-image', stimulus: "img/pt4.jpg", stim_key_association: "right"},
    {type: 'iat-image', stimulus: "img/pt5.jpg", stim_key_association: "right"},
    {type: 'iat-image', stimulus: "img/pt6.jpg", stim_key_association: "right"},
    {type: 'iat-image', stimulus: "img/pt7.jpg", stim_key_association: "right"},
    {type: 'iat-image', stimulus: "img/pt8.jpg", stim_key_association: "right"},
    {type: 'iat-image', stimulus: "img/pt9.jpg", stim_key_association: "right"},
    {type: 'iat-image', stimulus: "img/pt10.jpg", stim_key_association: "right"},
    {type: 'iat-image', stimulus: "img/car1.jpg", stim_key_association: "left"},
    {type: 'iat-image', stimulus: "img/car2.jpg", stim_key_association: "left"},
    {type: 'iat-image', stimulus: "img/car3.jpg", stim_key_association: "left"},
    {type: 'iat-image', stimulus: "img/car4.jpg", stim_key_association: "left"},
    {type: 'iat-image', stimulus: "img/car5.jpg", stim_key_association: "left"},
    {type: 'iat-image', stimulus: "img/car6.jpg", stim_key_association: "left"},
    {type: 'iat-image', stimulus: "img/car7.jpg", stim_key_association: "left"},
    {type: 'iat-image', stimulus: "img/car8.jpg", stim_key_association: "left"},
    {type: 'iat-image', stimulus: "img/car9.jpg", stim_key_association: "left"},
    {type: 'iat-image', stimulus: "img/car10.jpg", stim_key_association: "left"} 
    ],
    randomize_order: true,
    repetitions: 2
  };

  var instructions_block6 = {
    type: 'html-keyboard-response',
    stimulus: "<div style='position: absolute; top: 18%; left: 20%'>Stiskněte E pro:<br>" + "<strong>Špatný</strong><br>" + "nebo<br>" +
    "<strong>Automobil</strong></div><br><br>" + "<div style='position: absolute; top: 18%; right: 20%'>Stiskněte I pro:<br>" + "<strong>Dobrý</strong><br>" + "nebo<br>" +
    "<strong>MHD</strong></div><br><br>" +
    "<p><div style='position: relative; top: 42%; margin-left: auto; margin-right: auto'>Stiskněte klávesu <strong>E</strong> pro kategorii Špatný nebo Automobil.<br>" +
    "Stiskněte klávesu <strong>I</strong> pro kategorii Dobrý nebo MHD.<br><br>" +
    "Pokud uděláte chybu, objeví se červené X. Abyste mohl(a) pokračovat, musíte zmáčknout druhou klávesu. " +
    "Odpovídejte co nejrychleji, ale přesně.<br><br> " +
    "Stiskněte libovolnou klávesu, až budete připraven(a) pokračovat.</div></p>"
  };

  var trial_block6 = {
    timeline: [
    {
      type: jsPsych.timelineVariable('type'),
      stimulus: jsPsych.timelineVariable('stimulus'),
      stim_key_association: jsPsych.timelineVariable('stim_key_association'),
      html_when_wrong: '<span style="color: red; font-size: 80px">X</span>',
      bottom_instructions: '<p>Pokud uděláte chybu, objeví se červené X. Abyste mohl(a) pokračovat, musíte zmáčknout druhou klávesu.</p>',
      force_correct_key_press: true,
      display_feedback: true,
      trial_duration: 3000, //Only if display_feedback is false
      left_category_key: 'E',
      right_category_key: 'I',
      left_category_label: ['Špatný', 'Automobil'],
      right_category_label: ['Dobrý', 'MHD'],
      response_ends_trial: true,
      data: {iat_type: 'practice'}
    }
    ],
    timeline_variables: [
    {type: 'iat-image', stimulus: "img/pt1.jpg", stim_key_association: "right"},
    {type: 'iat-image', stimulus: "img/pt2.jpg", stim_key_association: "right"},
    {type: 'iat-image', stimulus: "img/pt3.jpg", stim_key_association: "right"},
    {type: 'iat-image', stimulus: "img/pt4.jpg", stim_key_association: "right"},
    {type: 'iat-image', stimulus: "img/pt5.jpg", stim_key_association: "right"},
    {type: 'iat-image', stimulus: "img/pt6.jpg", stim_key_association: "right"},
    {type: 'iat-image', stimulus: "img/pt7.jpg", stim_key_association: "right"},
    {type: 'iat-image', stimulus: "img/pt8.jpg", stim_key_association: "right"},
    {type: 'iat-image', stimulus: "img/pt9.jpg", stim_key_association: "right"},
    {type: 'iat-image', stimulus: "img/pt10.jpg", stim_key_association: "right"},
    {type: 'iat-image', stimulus: "img/car1.jpg", stim_key_association: "left"},
    {type: 'iat-image', stimulus: "img/car2.jpg", stim_key_association: "left"},
    {type: 'iat-image', stimulus: "img/car3.jpg", stim_key_association: "left"},
    {type: 'iat-image', stimulus: "img/car4.jpg", stim_key_association: "left"},
    {type: 'iat-image', stimulus: "img/car5.jpg", stim_key_association: "left"},
    {type: 'iat-image', stimulus: "img/car6.jpg", stim_key_association: "left"},
    {type: 'iat-image', stimulus: "img/car7.jpg", stim_key_association: "left"},
    {type: 'iat-image', stimulus: "img/car8.jpg", stim_key_association: "left"},
    {type: 'iat-image', stimulus: "img/car9.jpg", stim_key_association: "left"},
    {type: 'iat-image', stimulus: "img/car10.jpg", stim_key_association: "left"}, 
      {type: 'iat-html', stimulus: "Prohnilý", stim_key_association: "left"},
      {type: 'iat-html', stimulus: "Nenávist", stim_key_association: "left"},
      {type: 'iat-html', stimulus: "Ponížit", stim_key_association: "left"},
      {type: 'iat-html', stimulus: "Strašlivý", stim_key_association: "left"},
      {type: 'iat-html', stimulus: "Sobecký", stim_key_association: "left"},
      {type: 'iat-html', stimulus: "Negativní", stim_key_association: "left"},
      {type: 'iat-html', stimulus: "Otravný", stim_key_association: "left"},
      {type: 'iat-html', stimulus: "Katastrofa", stim_key_association: "left"},
      {type: 'iat-html', stimulus: "Přitažlivý", stim_key_association: "right"},
      {type: 'iat-html', stimulus: "Láska", stim_key_association: "right"},
      {type: 'iat-html', stimulus: "Radostný", stim_key_association: "right"},
      {type: 'iat-html', stimulus: "Smích", stim_key_association: "right"},
      {type: 'iat-html', stimulus: "Usměvavý", stim_key_association: "right"},
      {type: 'iat-html', stimulus: "Přítel", stim_key_association: "right"},
      {type: 'iat-html', stimulus: "Milý", stim_key_association: "right"},
      {type: 'iat-html', stimulus: "Nadšený", stim_key_association: "right"}
    ],
    randomize_order: true,
    repetitions: 1
  };

  var instructions_block7 = {
    type: 'html-keyboard-response',
    stimulus: "<div style='position: absolute; top: 18%; left: 20%'>Stiskněte E pro:<br>" + "<strong>Špatný</strong><br>" + "nebo<br>" +
    "<strong>Automobil</strong></div><br><br>" + "<div style='position: absolute; top: 18%; right: 20%'>Stiskněte I pro:<br>" + "<strong>Dobrý</strong><br>" + "nebo<br>" +
    "<strong>MHD</strong></div><br><br>" +
    "<p><div style='position: relative; top: 42%; margin-left: auto; margin-right: auto'>Tato část je stejná jako část předchozí.<br><br>" +
    "Stiskněte klávesu <strong>E</strong> pro kategorii Špatný nebo Automobil.<br>" +
    "Stiskněte klávesu <strong>I</strong> pro kategorii Dobrý nebo MHD.<br><br>" +
    "Každá položka patří pouze do jedné skupiny.<br><br>" +
    "Pokud uděláte chybu, objeví se červené X. Abyste mohl(a) pokračovat, musíte zmáčknout druhou klávesu. " +
    "Odpovídejte co nejrychleji, ale přesně.<br><br> " +
    "Stiskněte libovolnou klávesu, až budete připraven(a) pokračovat.</div></p>"
  };

var trial_block7 = {
  timeline: [
  {
    type: jsPsych.timelineVariable('type'),
    is_html: jsPsych.timelineVariable('is_html'),
    stimulus: jsPsych.timelineVariable('stimulus'),
    stim_key_association: jsPsych.timelineVariable('stim_key_association'),
    html_when_wrong: '<span style="color: red; font-size: 80px">X</span>',
    bottom_instructions: '<p>Pokud uděláte chybu, objeví se červené X. Abyste mohl(a) pokračovat, musíte zmáčknout druhou klávesu.</p>',
    force_correct_key_press: true,
    display_feedback: true,
    trial_duration: 3000, //Only if display_feedback is false
    left_category_key: 'E',
    right_category_key: 'I',
    left_category_label: ['Špatný', 'Automobil'],
    right_category_label: ['Dobrý', 'MHD'],
    response_ends_trial: true,
    data: {iat_type: 'bad-young'}
  }
  ],
  timeline_variables: [
    {type: 'iat-image', stimulus: "img/pt1.jpg", stim_key_association: "right"},
    {type: 'iat-image', stimulus: "img/pt2.jpg", stim_key_association: "right"},
    {type: 'iat-image', stimulus: "img/pt3.jpg", stim_key_association: "right"},
    {type: 'iat-image', stimulus: "img/pt4.jpg", stim_key_association: "right"},
    {type: 'iat-image', stimulus: "img/pt5.jpg", stim_key_association: "right"},
    {type: 'iat-image', stimulus: "img/pt6.jpg", stim_key_association: "right"},
    {type: 'iat-image', stimulus: "img/pt7.jpg", stim_key_association: "right"},
    {type: 'iat-image', stimulus: "img/pt8.jpg", stim_key_association: "right"},
    {type: 'iat-image', stimulus: "img/pt9.jpg", stim_key_association: "right"},
    {type: 'iat-image', stimulus: "img/pt10.jpg", stim_key_association: "right"},
    {type: 'iat-image', stimulus: "img/car1.jpg", stim_key_association: "left"},
    {type: 'iat-image', stimulus: "img/car2.jpg", stim_key_association: "left"},
    {type: 'iat-image', stimulus: "img/car3.jpg", stim_key_association: "left"},
    {type: 'iat-image', stimulus: "img/car4.jpg", stim_key_association: "left"},
    {type: 'iat-image', stimulus: "img/car5.jpg", stim_key_association: "left"},
    {type: 'iat-image', stimulus: "img/car6.jpg", stim_key_association: "left"},
    {type: 'iat-image', stimulus: "img/car7.jpg", stim_key_association: "left"},
    {type: 'iat-image', stimulus: "img/car8.jpg", stim_key_association: "left"},
    {type: 'iat-image', stimulus: "img/car9.jpg", stim_key_association: "left"},
    {type: 'iat-image', stimulus: "img/car10.jpg", stim_key_association: "left"},
    {type: 'iat-html', stimulus: "Prohnilý", stim_key_association: "left"},
    {type: 'iat-html', stimulus: "Nenávist", stim_key_association: "left"},
    {type: 'iat-html', stimulus: "Ponížit", stim_key_association: "left"},
    {type: 'iat-html', stimulus: "Strašlivý", stim_key_association: "left"},
    {type: 'iat-html', stimulus: "Sobecký", stim_key_association: "left"},
    {type: 'iat-html', stimulus: "Negativní", stim_key_association: "left"},
    {type: 'iat-html', stimulus: "Otravný", stim_key_association: "left"},
    {type: 'iat-html', stimulus: "Katastrofa", stim_key_association: "left"},
    {type: 'iat-html', stimulus: "Přitažlivý", stim_key_association: "right"},
    {type: 'iat-html', stimulus: "Láska", stim_key_association: "right"},
    {type: 'iat-html', stimulus: "Radostný", stim_key_association: "right"},
    {type: 'iat-html', stimulus: "Smích", stim_key_association: "right"},
    {type: 'iat-html', stimulus: "Usměvavý", stim_key_association: "right"},
    {type: 'iat-html', stimulus: "Přítel", stim_key_association: "right"},
    {type: 'iat-html', stimulus: "Milý", stim_key_association: "right"},
    {type: 'iat-html', stimulus: "Nadšený", stim_key_association: "right"}
  ],
  randomize_order: true,
  repetitions: 2
};

  var debrief_block = {
    type: "html-keyboard-response",
    stimulus: function() {
      // calculate D-score from https://faculty.washington.edu/agg/pdf/GB&N.JPSP.2003.pdf
      // first find mean RT
      var bad_old = jsPsych.data.get().filter({iat_type: 'bad-old'}).filterCustom(function(x) { return x.rt < 10000 });
      var mean_correct_responses_bad_old = bad_old.filter({correct: true}).select('rt').mean();
      var bad_young = jsPsych.data.get().filter({iat_type: 'bad-young'}).filterCustom(function(x) { return x.rt < 10000 });
      var mean_correct_responses_bad_young = bad_young.filter({correct: true}).select('rt').mean();

      // get overall sd
      var sd = bad_old.join(bad_young).filter({correct: true}).select('rt').sd();

      var d = (mean_correct_responses_bad_young - mean_correct_responses_bad_old) / sd;

      return "<p>Jste u konce! Děkujeme za dokončení experimentu! Níže naleznete výsledek testování.</p>"+
        "<p>U dvojic Špatný/Automobil a Dobrý/MHD Vám reakce trvala v průměru <strong>"+Math.floor(mean_correct_responses_bad_young)+"ms</strong>.</p>"+
        "<p>U dvojic Špatný/MHD a Dobrý/Automobil Vám reakce trvala v průměru <strong>"+Math.floor(mean_correct_responses_bad_old)+"ms</strong>.</p>"+
        "<p>Vaše skóre D, tj. index výkonnosti, který zohledňuje rozdíl průměrů a celkovou míru variability ve Vašich odpovědích, je <strong>"+d.toFixed(2)+"</strong>.</p>"+
        "<p>Dle webových stránek Project Implicit IAT značí skóre D vyšší než 0,15 mírnou předpojatost, vyšší než 0,35 střední předpojatost a skóre vyšší než 0,65 silnou předpojatost. </p>"
    }
  };

  var timeline = [];
  timeline.push(welcome_block);
  timeline.push(category_block);
  timeline.push(instructions_block);
  timeline.push(trial_block);
  timeline.push(instructions_block2);
  timeline.push(trial_block2);
  timeline.push(instructions_block3);
  timeline.push(trial_block3);
  timeline.push(instructions_block4);
  timeline.push(trial_block4);
  timeline.push(instructions_block5);
  timeline.push(trial_block5);
  timeline.push(instructions_block6);
  timeline.push(trial_block6);
  timeline.push(instructions_block7);
  timeline.push(trial_block7);
  timeline.push(debrief_block);

  jsPsych.init({
    timeline: timeline,
    on_finish: function() {
      jsPsych.data.displayData();
    }
  });
  </script>
  </html>
